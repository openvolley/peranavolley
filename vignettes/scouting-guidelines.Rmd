---
title: "VBStats Scouting Guidelines"
author: "Ben Raymond"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{VBStats Scouting Guidelines}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE, collapse = TRUE, comment = "#>", warning = FALSE, message = FALSE)
library(dplyr)
```

This guide describes a particular set of conventions for scouting volleyball matches using the Perana Sports VBStats app. These conventions are intended to give consistent scouted files that work well with the `peranavolley` R package, but without requiring an overly-onerous scouting procedure. Scouts should be familiar with the [VBStats User Guide](http://peranasports.com/VBStatsHD/Guide/VBStatsHD.html), in particular the [Actions and Results](http://peranasports.com/VBStatsHD/Guide/lessons/Actions_and_results.html) and "Coding from a video (both teams)" sections.

These conventions are supported by the `pv_tas_recode()` function, which changes some of the skills, evaluations, and other details of a scouted VBStats file following this guide.

## Skill evaluations

### Passes (serve receptions) and digs

- P3 = a good or perfect pass, giving the setter the option to set to any attacker (in DataVolley this would be scouted as "R#" or "R+")
- P2 = an "ok" pass (DataVolley "R!"), giving restricted attack options (but still more than one option). Often these are passes that force the setter to set 3m or more from the net. The setter doesn't have the option to set a true first tempo, but outside attacks can be made at normal medium/fast tempo. Note that some setters will still set their middle on these sets with a slower (low) quick ball. Mild overpasses or poorly positioned passes might also be rated as 2, if the setter only has two real options (say, the quick hitter and opposite on a low pass to position 2)
- P1 = a poor or negative pass (DataVolley "R-" or "R/"), generally only allowing a high ball set to be made or even no proper attack at all (an overpass or freeball back to the opposition)

### Serves

Rate serves by pass quality, so that a poor serve (S1) is one that allowed a perfect pass (P3), an OK serve (S2) with an OK pass (P2), and a good serve (S3) was one that the opposition was only able to make a poor pass (P1) on.

On serve errors, enter the ball path and also indicate the reason (net/out long/out side).

## Entering ball paths

Enter the ball path for all serves and attacks, showing the start and end points of the serve or attack. It's easiest to expand the court diagram to do this (this will happen automatically for attacks, but for serves you may need to use the small white square in the bottom-right of the court diagram). You can re-draw the ball path several times if you aren't happy with it on the first attempt.

For attacks, the starting location is used to label the attack type, so it's important that the starting location is behind the 3m line for back row attacks, and in front of the 3m line for front-row attacks. If it's a front-row player making the attack, enter the starting coordinate in front of the 3m line, even if they actually attack from behind it. Similarly, if it's a back row attack, make sure the starting coordinate is behind the 3m line (even though in reality the attack might be contacting the ball in the air in front of the 3m line). The only time you would enter a coordinate in front of the 3m line for a back-row attacker is if they put a freeball over from in front of the 3m line (starting coordinates aren't used to classify freeballs, only actual attacks).

The coach/technical coordinator might also ask for ball paths to be entered for sets. The start point is the important piece of information in this case (so that we know where the setter made the set from). This information allows for setter choices to be examined according to where on court they made the set from, but this is not always needed.

## Skill-specific conventions

### Sets

Unless the coach/technical coordinator has asked for sets to be scouted, don't scout setting actions *except* for set errors. Setter dumps are always entered (but these are entered as attack actions of type "dump", not as set actions).

If we scout all setting actions, it's extra work for the scout, but it allows some additional statistical insight. In particular, we can examine how a setter changes their set choice depending on where on court the pass goes (e.g. where does a setter tend to set given a poor pass to position 4, compared to a poor pass to position 2?). Thus, if the coach/technical director has asked for setting actions to be scouted, then *all* sets should be scouted, including the ball path of the set. The starting position of the ball path is where the setter sets from; the end of the ball path is where the set goes to (where the attacker makes contact with the ball, or where ball bounces/hits the net in those situations).

Do not select the "Record assists" option in the app settings. (Doing this will cause a set action to be automatically inserted, but *only* on attack kills. Thus, we don't get consistent scouting of setting actions.)

### Attacks

#### Number of blockers

Enter the number of blockers on each attack.

#### Setting zones

Setting zones are used in VBStats to indicate particular attack types. When you scout an attack, you can optionally assign one of five pre-designated setting zones. You can also leave the setting zone un-assigned. We recommend using the setting zone in conjunction with the attack coordinates to generate more meaningful attack descriptions.

Use the following setting zones:

```{r}
knitr::kable(tibble(`Setting zone` = 1:5, `Attack type` = c("Quick ball in front", "Quick ball behind", "Quick ball at a distance in front of the setter, sometimes called a B-quick", "Slide attack", "High ball"), `Equivalent DataVolley attack code` = c("X1", "X2", "X7", "CF", "V5, VP, etc")))

```

When the scouted file is processed by `pv_tas_recode()`, the following rules are applied:

- If the setting zone has been specified as one of the first four (i.e. not a high ball), the associated DataVolley attack code (X1, X2, etc) will be inserted into the `attack_code` column of the data.
- If setting zone 5 (high ball) has been specified, the attack will be labelled according to its starting coordinate. For example, a highball attack from position 4 will be given the `attack_code` V5, and a back-row right-side highball (from position 9 or 1) will be given V8.
- If the setting zone has been left empty, the attack will be given an attack code according to its starting coordinate, assuming a standard tempo attack. For example, an outside hit from position 4 will be `attack_code` X5 (this type of attack is also known as a "black" or "11"), and a back-row middle attack (from position 8 or 6) will be `attack_code` XP (pipe).

### Freeballs

As of VBStats version 2.34.232, there isn't a specific action for freeballs. A freeball over (i.e. an easy ball put over the net to the opposition when no attack is possible) should be scouted as an attack, with the attack type "Dump". A freeball dig (the subsequent dig made on such a ball) should be scouted as a normal defense (dig) action.

If the freeball over happens to win the point, it is important to include a dig following it, with "error" evaluation. If no opposition player actually performed a dig, scout the dig anyway, and assign it to the player who should have made the dig (see the "Assigning blame" section below).

When the scouted file is processed by `pv_tas_recode()`, any "dump" attacks performed by a setter will be treated as a setter dump, but any "dump" attacks performed by a non-setter will be treated as a freeball attack. Additionally, any dig following a freeball attack will be treated as a freeball dig. This allows us to examine freeball-specific statistics, if we wish.


## Assigning blame

For many downstream analyses (after the scouting is complete) it's important to be able to identify which player was responsible for particular actions. Absolute numbers generally aren't meaningful on their own (would you rather have a middle blocker who got 5 kill blocks, or one who got 10? What if the one who got 5 got them from 5 attempts, and the one who got 10 took 50 attempts?). We need to keep track of the number of times a particular player was in a given situation, if we want to evaluate their performance in that situation.

In some cases, a player's "opportunities" are recorded in the data without any extra effort from the scout (e.g. the number of serves that a particular player made can be extracted from the data, and so their error rate (number of errors/number of serves) is straightforward to calculate. However, in other cases this may not be so easy. Take receptions, for example. If we were to scout a serve ace *without* also scouting the corresponding reception action, it would generally be difficult to figure out with certainty later on (purely from the scouted data) who the responsible receiver was. That in turn would mean that if we want to identify weak passers (e.g. from an opposition team so that we can target our serves, or from our own team so we can tailor our training appropriately) we might not be able to do so accurately.

(This section not yet completed.)

## Common issues and VBStats limitations

- As of VBStats version 2.34.232, it is not possible to enter further actions (during the same point) after an attack kill or serve ace. But we want to know who made the reception or dig error, so we need to enter that action as well. There are three options, with the first being the preferred method:

    - enter the serve as S3 (with its ball path and serve type), then enter the pass action (error), then go back and alter the serve evaluation to "Ace". This will also work for attack kills/dig errors (enter the attack as "Spike in play" first, then the dig error, then change the spike to "Kill"). This is probably the best way to do it.
    - enter only the reception error. The serve action will be automatically entered, but you'll have to go back to the serve and enter its ball path and serve type. (This won't work for attack kill/dig errors though).
    - use the [short cut panel](http://peranasports.com/VBStatsHD/Guide/lessons/How_to_code.html) for two-team scouting to enter the passing player number and pass error, then go back to the serve and enter the ball path and serve type. (This won't work for attack kill/dig errors).

- If the right-hand tool bar is showing the wrong server (a team's rotation has gotten out of whack), you can change the server with the lineup button (button 9  at the bottom of [this page](http://peranasports.com/VBStatsHD/Guide/lessons/Screen_detail.html)).

- If the scores needs adjusting (e.g. if the video has dropped out for a period of time, and you need to re-start scouting when the video comes back on), click the scores in the middle of the top toolbar ([button 6](http://peranasports.com/VBStatsHD/Guide/lessons/Screen_detail.html)) and adjust as appropriate. You might also need to adjust the team rotations with the lineup button (see previous point).

- To edit the setting zone that has been assigned to an already-entered attack, go to the video screen (the video frame icon at the top right of the match detail screen (button 23 [here](http://peranasports.com/VBStatsHD/Guide/lessons/Match_detail.html)). Find the action to edit, and left-swipe. Click the pencil icon and edit as required. This also allows you to un-select the setting zone (i.e. set it back to "no setting zone"), which you can't currently do during live scouting.

